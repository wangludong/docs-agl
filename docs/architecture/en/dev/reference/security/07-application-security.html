<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <meta name="description" content=" ">

    <title>
	    AGL Developer Site - 
        
            
                Application Security  -
            
        
    </title>

    <link rel="SHORTCUT ICON" href="/favicon.ico"/>

    

    
    

    <link rel="canonical" href="http://docs.automotivelinux.org/docs/architecture/en/dev/reference/security/07-application-security.html">

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/static/styles/main.css">
    <link rel="stylesheet" type="text/css" href="/static/styles/syntax.css">
    <!-- Algolia Search CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />

    <!-- Fonts -->
    <!-- For attribution information, see www/attributions.html -->
    <link href='https://fonts.googleapis.com/css?family=Raleway:700,400,300,700italic,400italic,300italic' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- <script defer type="text/javascript">
        var disqus_developer = ; // this would set it to developer mode
    </script>-->

    <!-- JS -->
    <script defer type="text/javascript" src="/static/js/lib/jquery-2.1.1.min.js"></script>
    <script defer type="text/javascript" src="/static/js/lib/bootstrap.min.js"></script>
<!--    <script defer type="text/javascript" src="/static/js/lib/ZeroClipboard.js"></script>-->

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', '{}', 'auto');
    ga('send', 'pageview');
</script>

</head>

<body>
    <header>
    <a class="scroll-point pt-top" name="top"></a>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="/"><img id="logo_top" src="/static/img/branding/agl_title_793x211.png"/></a>
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <div class="nav_bar_left">
                    <ul class="nav navbar-nav">
                        <li >
                            <a href="/docs/getting_started/en/dev/">Getting Started</a>
                        </li>
                                                
                        <li >
                            <a href="/docs/architecture/en/dev/">Architecture Guides</a>
                        </li>

                        <li >
                            <a href="/docs/hardware/en/dev/">Hardware Support</a>
                        </li>

                        <li >
                            <a href="/docs/devguides/en/dev/">Developer Guides</a>
                        </li>
                        
                        <li >
                            <a href="/docs/apis_services/en/dev/">APIs & Services</a>
                        </li>
					</ul>
				</div>
                <div class="nav_bar_right">
                    <ul class="nav navbar-nav">
                        <li >
                            <a href="/techpost" id="blog_button">TechPost<span class="badge" id="new_blog_count"></span></a>
                        </li>
                        <li >
                            <a href="/contribute">Contribute</a>
                        </li>
                        <li>
                            <form class="navbar-form navbar-right" id="header-search-form" role="search">
                                <div class="input-group">
                                    
                                    <input id="header-search-field" type="text" placeholder="Search 'dev' docs..." class="form-control hidden-xs" autocomplete="off">
                                </div>
                            </form>
                        </li>
                    </ul>
                </div>
            </div><!--/.navbar-collapse -->
        </div>
    </nav>
    <div id="_fixed_navbar_spacer" style="padding-top:50px"></div>
</header>














<div class="docs container">

    <!-- Table of Contents -->
    <div class="hidden-xs hidden-sm col-md-4 col-lg-3 site-toc-container">
        <ul class="site-toc">
    

    <li>
        
            <span class="toc-section-heading">
                AGL Specifications
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/architecture/en/dev/reference/AGL_Specifications/agl_spec_v1.0_final.pdf">
                Automotive Grade Linux Requirements Specifications
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Security Blueprint
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/architecture/en/dev/reference/security/01-overview.html">
                Overview
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/architecture/en/dev/reference/security/04-adversaries.html">
                Adversaries
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/architecture/en/dev/reference/security/05-security-concepts.html">
                Security Concepts
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/architecture/en/dev/reference/security/06-plateform-security.html">
                Platform Security
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="this-page" href="/docs/architecture/en/dev/reference/security/07-application-security.html">
                Application Security
            </a>
            
                <span class="entry-highlight"></span>
            
        

        
        <div id="page-toc" class="page-toc"></div>

        
    </li>
    

    <li>
        
            <a class="" href="/docs/architecture/en/dev/reference/security/08-Hardening.html">
                Harden Configurations
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    
</ul>

    </div>

    <!-- Page content -->
    <div class="col-md-8 col-md-offset-4 col-lg-9 col-lg-offset-3 page-content-container container">
        <div class="page-content row">
            <div class="col-md-offset-1 col-md-10">
                <div class="content-header">

                    <!-- ToC Dropdown (for XS and SM sizes only) -->
                    <div class="toc-dropdown dropdown visible-xs-block visible-sm-block">
                        <button class="btn btn-default dropdown-toggle" type="button" id="tocDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            Table of Contents
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            






<li>
    <a class="" href="reference/AGL_Specifications/agl_spec_v1.0_final.pdf">
        Automotive Grade Linux Requirements Specifications
    </a>
</li>











<li>
    <a class="" href="reference/security/01-overview.html">
        Overview
    </a>
</li>




<li>
    <a class="" href="reference/security/04-adversaries.html">
        Adversaries
    </a>
</li>




<li>
    <a class="" href="reference/security/05-security-concepts.html">
        Security Concepts
    </a>
</li>




<li>
    <a class="" href="reference/security/06-plateform-security.html">
        Platform Security
    </a>
</li>




<li>
    <a class="this-page" href="reference/security/07-application-security.html">
        Application Security
    </a>
</li>




<li>
    <a class="" href="reference/security/08-Hardening.html">
        Harden Configurations
    </a>
</li>







                        </ul>
                    </div>

                    
                    
                        <a class="edit" href="https://github.com/automotive-grade-linux/docs-agl/edit/master/docs/sec-blueprint/07-application-security.md"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</a>

                    
                    

                    <!-- Language dropdown -->
                    <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="languageDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            
                            <span class="caret"></span>
                        </button>

                        <!-- List all languages -->
                        <ul class="dropdown-menu" aria-labelledby="languageDropdown">
                            
                        </ul>
                    </div>

                    <!-- Version dropdown -->
                    <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="versionDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            dev
                            
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="versionDropdown">

                            <!-- List versions available in this language -->
                            
                        </ul>
                    </div>
                </div>

                
                
                

                
                

                <!-- Show warnings for special versions -->
                <!-- dev warning -->
                
                    <div class="alert docs-alert alert-info" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        Draft version of documentation under development may change!
                        <a href="/docs/en/latest/">
                            Click here for the latest released version.
                        </a>
                    </div>
                
                
                <!-- outdated warning -->
                


                <div id="page-toc-source">
                    <!-- WARNING: This file is generated by fetch_docs.js using /w/workspace/sandbox-doc-update/webdocs-agl/content/tocs/architecture/fetched_files.yml -->

<p><strong>Table of Content</strong></p>

<ol id="markdown-toc">
  <li><a href="#application-definition" id="markdown-toc-application-definition">Application Definition</a></li>
  <li><a href="#apps-must-be-installed" id="markdown-toc-apps-must-be-installed">Apps must be installed</a></li>
  <li><a href="#app-containement" id="markdown-toc-app-containement">App containement</a></li>
  <li><a href="#which-protection-are-enforced-on-an-app" id="markdown-toc-which-protection-are-enforced-on-an-app">Which protection are enforced on an App</a>    <ol>
      <li><a href="#app-origin" id="markdown-toc-app-origin">App origin</a></li>
      <li><a href="#platform-security-configuration" id="markdown-toc-platform-security-configuration">Platform security configuration</a></li>
      <li><a href="#agl-platform-protections" id="markdown-toc-agl-platform-protections">AGL Platform protections</a></li>
      <li><a href="#protections-enforcement" id="markdown-toc-protections-enforcement">Protections enforcement</a></li>
      <li><a href="#privilege-grouping" id="markdown-toc-privilege-grouping">Privilege grouping</a></li>
    </ol>
  </li>
</ol>

<h2 id="application-definition">Application Definition</h2>
<p>The term of Application (Apps) has a very wide coverage in AGL.<br />
To make it short, anything which is not in the core OS, is an App.</p>

<p>Apps can be included in the base image or added after the fact, they can offer a UI, or only offer a service.<br />
In AGL, most of the middleware will be treated as Apps.</p>

<h2 id="apps-must-be-installed">Apps must be installed</h2>
<p>Undependently of the fact that Apps are delivered with the base image or later installed on a running image, Apps are installed under the control of the Application Framework (AppFW).<br />
A special off-line mode of the AppFW, allows to install Apps at image creation.*</p>

<p><strong>* Note :</strong> In early release, default Apps are installed on the image at first boot.</p>

<h2 id="app-containement">App containement</h2>
<p>Apps are running in isolation of the system and other Apps.<br />
In order to acheive an efficient containement multiple strategies are used :</p>

<ul>
  <li><strong>Linux Native protection</strong>
    <ul>
      <li>Smack label (Mandatory Access Control)</li>
      <li>Capabilities</li>
      <li>Names Spaces</li>
      <li>Seccomp filter</li>
      <li>Cgroup</li>
      <li>File Integrity</li>
    </ul>
  </li>
  <li><strong>AGL Platform protections</strong>
    <ul>
      <li>End2end App author tracking and validation</li>
      <li>Apps Privileges</li>
      <li>Autiticated Apps to Apps/Services transport</li>
    </ul>
  </li>
</ul>

<h2 id="which-protection-are-enforced-on-an-app">Which protection are enforced on an App</h2>

<h3 id="app-origin">App origin</h3>

<p>The AGL App development process enforces of the level of autorisation given to an App developper and tracks that autorisation level end2end.
Depending of the implementation, the tracking may be :
* static, simply enforced at the registration of the App on the repository or dynamic. 
* dynamic, track and verified at installation by the AppFW.</p>

<p>The origin tracking and validation is critical.<br />
It is the first section the chain of trust for providing valid information to the AppFW installer module.</p>

<h3 id="platform-security-configuration">Platform security configuration</h3>

<p>The AppFW derives from the Meta data received with the App at delivery, which privileges will be granted to this App :
* Max CPU, RAM, IO, …
* Firewall configuration
* Name spaces …
It will create the directories required for the App following the Smack rules described in the “Platform Security” blueprint as well as the associated systemd config files to be used by the launcher.<br />
As the platform securities services are static for a given release of the OS, the mapping remains simple.</p>

<p><strong>Important</strong><br />
* An App cannot change the CoreOS.<br />
It s not allowed for an App to modify or add an element to the CoreOS.<br />
Like with containers App are required to embed all the code required for their operation.<br />
Within this limitation Apps (which can be a only a service) can still offer services to other App by the mean of AGL binders which use the autenticated AGL transport.</p>

<h3 id="agl-platform-protections">AGL Platform protections</h3>

<p>By default AGL provides three specific protection services :
* Privilege management and enforment via cynara
* Autenticated transport (via AGL binders, websocket and Oauth2)
* App origin validation</p>

<p>Because AGL Apps also include services provided by Middleware, new APIs can be created by Apps and new privileges may be required to access those API.<br />
e.g. a Free Parking space service App from Vinci may offer an API for any Navigation system to read the free parking space count for a given location in order to display it on the Map.<br />
We may not want to leave wide open that new API what would induce mobile data with its associated charges.</p>

<p>That small use case, shows how AGL AppFW will not only, have to register the privileges requested by an App in Cynara, it will also have to add new privileges associated with API created by Apps.</p>

<h3 id="protections-enforcement">Protections enforcement</h3>

<p>Platform Securities are enforced by Linux as soon as they are activated.<br />
This is the simpler case.<br />
We just need to be sure that means to deactivate those protections are removed from the kernel configuration (see Kernel hardning).</p>

<p>AGL Platform protections are mostly enforced by dedicated middleware which are protected by the platform securities.<br />
Some more risky zones are identified :
* the creation of binding where an App could create a look a like binding that does not respect any protection.
* services which provide a wide range of service and need to restict the user request following his profile.</p>

<p>The first one can be enforced by removing by setcomp the option to create websocket directly by an App and requesting the creation to be done via a trusted service at binding enabling.<br />
The second requires a duplication of some API in order to be able to keep the filtering on the verbs of the API without requiring to drill down to the parameters.</p>

<p>The side effect of this complexity will impose to create an introspection mode where there is the possibility to verify all the API offered by an App and which privileges are required to activate them.</p>

<h3 id="privilege-grouping">Privilege grouping</h3>
<p>In order keep the concept of White listing manageable, a privilege hiercharchy is used.<br />
A small example shoudl clarify that concept.</p>

<ul>
  <li>System:Com:SMS:notify</li>
  <li>System:Com:SMS:list</li>
  <li>System:Com:SMS:display</li>
  <li>System:Com:SMS:send</li>
  <li>System:Com:SMS:transfer</li>
  <li>
    <p>System:Com:SMS:* (the * requires to be explicit on global capability request)</p>
  </li>
  <li>System:Com:Phone:notify</li>
  <li>System:Com:Phone:list</li>
  <li>System:Com:Phone:display</li>
  <li>System:Com:Phone:send</li>
  <li>System:Com:Phone:transfer</li>
  <li>
    <p>System:Com:Phone:*</p>
  </li>
  <li>
    <p>System:Com:*              (includes SMS:* &amp; Phone:*)</p>
  </li>
  <li>System:Com:*:notify     (includes SMS:notify &amp; Phone:notify)</li>
</ul>

<p>That last concept might be too complex to implement and real usefulness should be validated.</p>



                </div>
            </div>
        </div>
        <div class="row">
            <div class="blue-divider"></div>
<footer>
    <div class="container-fluid">
        <div class="row">
    <div class="col-sm-9">
        <h1>More Resources</h1>
        <div class="row">
            <div class="col-sm-4">
                <h2>General</h2>
                <ul class="nav">
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/">AGL Developer Community</a>
                    </li>
                    <li>
                        <a href="https://www.automotivelinux.org/software/download/">Download Distribution</a>
                    </li>
                    <li>
                        <a href="https://gerrit.automotivelinux.org/gerrit/#/admin/projects/">Source Code on Git</a>
                    </li>
                    <li>
                        <a target="_blank" href="/contact">Mailing List</a>
                    </li>
                </ul>
            </div>
            <div class="col-sm-4">
                <h2>Development</h2>
                <ul class="nav">
                    <li><a target="_blank" href="https://wiki.automotivelinux.org/agl-distro/source-code">Source Code</a></li>
                    <li><a target="_blank" href="https://jira.automotivelinux.org/browse/SPEC/?selectedTab=com.atlassian.jira.jira-projects-plugin:summary-panel">Issue Tracker</a></li>
                    <li><a target="_blank" href="https://wiki.automotivelinux.org/">Wiki</a></li>
                    <li><a href="https://www.automotivelinux.org/contact-us">Contact</a></li>
                </ul>
            </div>
            <div class="col-sm-4">
                <h2>Automotive Grade Linux @ Linux Foundation</h2>
                <ul class="nav">
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/">About AGL</a>
                    </li>
                    <li>
                        <a target="_blank" href="http://www.linuxfoundation.org/">About Linux Foundation</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://wiki.automotivelinux.org/start/getting-started">Join AGL community</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/about/members">Members</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-sm-3">
        <h1>Contribute</h1>
        <p style="padding-top:20px"><strong>Help AGL move forward!</strong></p>
        <p>Report bugs, improve the docs, or contribute to the code.</p>
        <a href="/contribute" class="btn btn-lg btn-primary">
            Learn More
        </a>
        <p style="padding-top:20px"> <a href="https://twitter.com/autogradelinux" class="twitter-follow-button" data-show-count="false">Follow @autogradelinux</a></p>
    </div>
</div>
<div class="row">
	<div class="col-sm-9">
		<p class="copyright_text">
			Copyright &copy; 2015-2016 Automotive Grade Linux Documentation, Licensed under the <a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
			<br/>
			Automotive Grade Linux and logos are <a target="_blank" href="http://www.linuxfoundation.org">trademarks</a> of The Linux Foundation.
			<br/>
			Initial site design from <a href="https://cordova.apache.org/">Cordova website.</a> - warm thanks !
		</p>
	</div>
    <div class="col-sm-3">
		<small class="stats">Page rendered at:  2017-07-10 00:02:32 +0000</small>
		
		<br/><small class="stats"><a href="https://raw.githubusercontent.com/automotive-grade-linux/docs-agl/master/docs/sec-blueprint/07-application-security.md">Link to source document</small>
		
	</div>
</div>

    </div>
</footer>

        </div>
    </div>
</div>

<script defer type="text/javascript" src="/static/js/lib/toc.min.js"></script>
<script defer type="text/javascript" src="/static/js/docs.js"></script>

    <script defer type="text/javascript" src="/static/js/twitter.js"></script>
    



<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
    docsearch({
        apiKey: 'edd30bcff9f6df4b095c41cba3e5a418',
        indexName: 'automotivelinux',
        inputSelector: '#header-search-field',
    });
</script>

            
    

</body>
</html>
